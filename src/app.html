<template>
  <require from="./resources/elements/header/navbar"></require>
  <require from="./resources/elements/footer/footer"></require>
  <require from="./resources/value-converters/filterIndex"></require>
  <div uk-grid class="uk-grid-small">
    <nav class="uk-navbar-container uk-width-1-1">
      <div class="uk-navbar-left">
        <a class="uk-navbar-item uk-logo" href="#">elastic5earch toolbox</a>
        <div class="uk-navbar-item">
          <form>
            <input class="uk-input uk-form-small uk-form-width-large" type="text" placeholder="elasticsearch host:port" value.bind="esURL">
            <button class="uk-button uk-button-small uk-button-primary" click.trigger="connectToES()">Connect</button>
          </form>
        </div>
      </div>
    </nav>
    <div class="uk-card uk-card-default uk-card-small uk-width-1-3@s uk-width-1-4@m uk-width-1-6@l uk-width-1-6@xl" show.bind="indexes">
      <div class="uk-margin-left uk-margin-right uk-panel">
        <span class="uk-active">INDICES</span>
        <input class="uk-input uk-form-small uk-margin-small" id="Replica-Count" type="text" placeholder="Search..." ref="search">
        <div class="uk-margin-right-small uk-position-right">
          <ul class="uk-iconnav">
            <li>
              <div class="uk-inline">
                <a type="button" uk-icon="icon: plus"></a>
                <div uk-drop="mode: click;animation: uk-animation-slide-top-small; duration: 500">
                  <div class="uk-card uk-card-default">
                    <div class="uk-card-body">
                      <form class="uk-form-stacked">
                        <div class="uk-margin">
                          <label class="uk-form-label" for="Index-Name">Index Name</label>
                          <div class="uk-form-controls">
                            <input class="uk-input uk-form-small" id="Index-Name" type="text" placeholder="Index Name" value.bind="iName">
                          </div>
                        </div>
                        <div class="uk-margin">
                          <label class="uk-form-label" for="Shard-Count">Shard Count</label>
                          <div class="uk-form-controls">
                            <input class="uk-input uk-form-small" id="Shard-Count" type="text" placeholder="Shard Count" value.bind="sCount">
                          </div>
                        </div>
                        <div class="uk-margin">
                          <label class="uk-form-label" for="Replica-Count">Replica Count</label>
                          <div class="uk-form-controls">
                            <input class="uk-input uk-form-small" id="Replica-Count" type="text" placeholder="Replica Count" value.bind="rCount">
                          </div>
                      </form>
                      </div>
                      <div class="uk-card-footer">
                        <button class="uk-button uk-button-primary uk-button-small uk-width-1-1" click.trigger="createIndex(iName,sCount,rCount)">Create an Index</button>
                      </div>
                    </div>
                  </div>
                </div>
            </li>
          </ul>
          </div>
        </div>
        <ul class="uk-nav-default uk-nav-parent-icon uk-padding-small" uk-nav>
          <li class="uk-active"><a href="#" show.bind="indexes.length==='0'">No Indices Found</a></li>
          <li class="uk-parent" repeat.for="index of indexes | filter:search.value">
            <a href="#" class="uk-text-bold" css="text-decoration: ${index.status==='close'?'line-through':'none'};" click.trigger="getData(index.index)">
              <span class="uk-margin-small-right" css="color: ${index.health==='yellow'?'#FF5722':index.health};" uk-icon="icon: database"></span>${index.index}
            </a>
            <ul class="uk-nav-sub">
              <li repeat.for="map of index.mappings"><a href="#"><span uk-icon="icon: album"></span> ${map}</a></li>
              <li class="uk-text-muted" show.bind="index.mappings.length===0">No mappings</li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="uk-card uk-card-default uk-card-small uk-width-2-3@s uk-width-3-4@m uk-width-5-6@l uk-width-5-6@xl" show.bind="indexes">
        <div class="uk-overflow-auto">
          <div class="uk-placeholder">
            <h1 class="uk-h1 uk-text-lead uk-heading-bullet" show.bind="dataHeader.length===0"><span class="uk-text-primary " uk-icon="icon: info;ratio: 2"></span> No data to show</h1>
          </div>
          <table class="uk-table uk-table-small uk-table-hover">
            <thead>
              <tr>
                <th repeat.for="item of dataHeader">${item}</th>
              </tr>
            </thead>
            <tbody>
              <tr repeat.for="item of data">
                <td repeat.for="name of dataHeader">${item[name]}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <footer></footer>
</template>
